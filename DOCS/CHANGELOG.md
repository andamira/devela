# Changelog from 2025 on

## [0.23.0-wip] *unreleased*

### Added
- new features:
  - lang: `glsl`, `js`.
  - ui: `desk`, `term`, `web`.
  - capability: `_maxest`, `_value_all`, `_value[8|16|32|64|128|256|512|1024]`.
  - safety: `unsafe_ffi`.
- new traits:
  - data:
    - codec: `Encodable`, `EncodabeLen`.
    - table: `DataValue[Copy]`, `DataType[Copy]`, `DataRaw[Copy]`.
  - num: `ExtNumConst`.
  - sys: `AppEnv`, `ExtLog`.
  - ui: `MiniquadEventHandlerExt`, `UiService`.
  - work: `ExtProcess`.
- new consts:
  - media::font: `FONT_3_3`, `FONT_3_5`, `FONT_5_6`.
  - `Float`|`ExtFloatConst`: `EXPONENT_BIAS`, `EXPONENT_BITS`, `SIGNIFICANT_BITS`.
  - `AngleDirection::{CounterClockwise, CCW, RightHandRule, RHR, Clockwise, CW, LeftHandRule, LHR}`.
- new types:
  - code: `ScopeGuard`.
  - data: `NoData`.
    - codec: `Base`, `EncodeBe`, `EncodeLe`, `EncodeIf`, `EncodeJoin`, `EncodeFlags`, `EncodeLen`, `EncodeLenValue`.
    - key: `StaticMapEntry`.
    - table: `DataValue*`, `DataType*`, `DataRaw*`.
    - xipher: `Crockford`, `Rfc4648`, `Rfc4648Hex`.
  - lang: `g_*`, `js_*`, `JsEventKind`, `JsEventMouse`, `JsEventPointer`, `JsInstant`, `JsKeyLocation`, `JsPermission`, `JsPermissionState`, `JsTextMetrics`, `JsTextMetricsFull`, `JsTimeout`, `JsWorker`, `JsWorkerError`, `JsWorkerJob`.
  - media: `BitmapFont`, `Sixel`, `Dither`, `PixelFormat`, `SixelError`, `SixelMean`, `SixelQuality`, `SixelSplit`.
  - num:
    - geom:
      - linear: `Matrix`.
      - metric: `Distance`, `Orientation`, `Position`, `Region`, `Stride`, `RegionStrided`.
    - quant: `Cycle`, `CycleCount`.
  - phys: `TimeDelta`.
  - sys:
    - env::app: `AppApple`, `AppConfig`, `AppWindows`, `AppUnix`, `AppXdg`,
    - io: `IoEmpty`, `IoRepeat`.
    - log: `LogConfig`.
    - mem: `Current`, `CurrentGuard`, `SpinLock`, `SpinLockGuard`.
  - ui: `UiCap`, `UiCapImage`, `UiCapInput`, `UiCapSound`, `UiCapSystem`, `UiCapWindow`.
    - `EventButton`, `EventButtonState`, `EventMouse`, `EventPointer`, `EventPointerType`, `EventTimestamp`.
    - `CrosstermService`.
    - `MiniquadPixels`, `MiniquadService`.
  - namespaces: `Fmt`, `Fs`, `FsPath`, `Io`, `Iter`, `Js`, `Log`, `Panic`.
- new macros:
  - `define_panic_handler!`, `define_static_map!`.
  - `js_reexport`, `maybe!`, `miniquad!`, `strjoin!`, `xorshift_custom!`.
- new modules:
  - data: `{codec::{self, radix}, list, key, table, uid, xipher}`.
  - lang: `{c, glsl}`.
  - media: `{image::sixel, video}`.
  - num: `{geom::metric, ord, quant}`.
  - sys: `{log, net, fs}`.
  - ui: `{back::{self, crossterm, miniquad}, front}`.
- new macro arms:
  - `format_buf!`: `?`.
  - `str!`: `ip_addr`.
  - `unwrap!`: `ok_err`.
- new methods:
  - `Char`: `len_utf8`, `code_len_utf8[_unchecked]`,`code_to_utf8_bytes[_unchecked]`, `[code_]to_ascii_str[_unchecked]`, `is_valid`, `to_ascii_fold[_unchecked]`, `utf8_len[_checked]`.
  - `Env::*`.
  - `ExtAny`: `type_hash`, `type_hash_with`.
  - `ExtFuture`: `pending`, `poll_fn`, `ready`.
  - `ExtThread`: `sleep_ms`, `sleep_us`, `sleep_ns`.
  - `Float`: `midpoint`, `recip`, `to_degrees`, `to_radians`.
  - `HasherFx`: `hash_bytes_with_seed`.
  - `Slice::<u8>::const_copy`.
  - prngs: `from_state`, `inner_state`.
- new variants:
  - `IoErrorKind:` `OutOfMemory`, `FilesystemLoop`, `FilesystemQuotaExceeded`, `CrossesDevices`, `InvalidFilename`, `InProgress`.
- new re-exports:
  - core: `any::type_name` as `any_type_name`,
  - std:
    - `alloc::System` as `SystemAlloc`.
    - env: `*`.
    - io: `IoEmpty`, `IoIntoInnerError`, `IoRepeat`, `Std[err|in|out][Lock]`.
    - panic: `PanicHookInfo`.
    - process: `*`.
    - sync: `LazyLock`.
  - log: `*`.
- new optional dependencies: `ffmpeg-the-third`, `fltk`, `flume`, `fontdue`, `gilrs`, `image`, `itertools`, `orion`, `ring`, `sdl2`, `sdl3`, `simdutf8`, `toml_edit`, `ureq`.
- new profile: `wasm`.
- new example: `js_web_api`.
- add musl architectures to `check.rs` script.
- add docs for monitored nightly features and for disabled dependencies.
- add more doc tags: `TAG_FFI`, `TAG_FMT`, `TAG_GEOM`, `TAG_NO`, `TAG_NUM`, `TAG_QUANT`, `TAG_RAND`, `TAG_TEXT`, `TAG_TIME`.

### Removed
- remove standalone re-exported fns from `std::{fmt, iter}`.
- remove standalone fns:
  - io: `io_*`.
  - panic: `panic_*`.
  - text: `crate_root`, `crate_root_string`.
  - work: `future_block`, `future_pending`, `future_ready`.
- remove methods:
  - `Float:` `const_round_ties_odd`.
- remove private variant `IoErrorKind::Uncategorized`.
- remove features: `unsafe_async`.
- remove modules:
  - `data::collections`.
  - `num::alg`.
- disable optional dependencies: `js-sys`, `ring`, `rkyv`, `wasm-bindgen`, `web-sys`.
- deprecate:
  - `Char::len_to_utf8`.
  - `Float::{const_[clamp|max|min|signum|copysign]}`.

### Changed
- bump MSRV to 1.84.1.
- rename features:
  - `_docs_max` to `_max`, `_docs_min` to `_docs`, `_string_*` to `_str_*`.
- change features into cfg flags:
  - `nightly`, `nightly_allocator`, `nightly_autodiff`, `nightly_bigint`, `nightly_coro`, `nightly_doc`, `nightly_float`, `nightly_simd`, `nightly_stable`, `nightly_stable_next1`, `nightly_stable_next2`, `nightly_stable_later`.
- rename flags:
  - `prim···` flag to `prim··`, `_str*` to `_str*`.
- rename/move modules:
  - `code::result::{error, panic}` inside `code`.
  - `data::collections::{array, destaque, list, stack, vec}` inside `data::list`.
  - `data::{bit, hash, serde}` inside `data::codec`.
  - `data::error` inside `code::error`, make private.
  - `num::cmp` to `num::ord`.
  - `num::alg::linear` to `num::geom::linear`.
  - `num::geom::shape::{angle, extent}` inside `num::geom::metric`.
  - `num::wave` to `phys::wave`.
  - `sys::path` inside `sys::fs`, make private.
  - `work::async` to `work::future`.
  - `work::thread` to `work::process`.
- rename/move items:
  - `LoggerConfig` to `LogConfig`.
  - `TextWrite` trait to `FmtWrite`.
  - re-exports: `Layout` to `MemLayout`, `LayoutError` to `MemLayoutError`.
  - `impl_error!` to `define_error!`.
- rename variants:
  - `AngleDirection`: `CounterClockwise` to `Positive`, `Clockwise` to `Negative`.
- rename/move fns/methods:
  - from prngs: `next_state` method to `peek_next_state`.
  - `fmt_write`, `fmt_format` and `format_buf_args` to `Fmt::{write, format, format_buf`, respectively.
  - `bytes_from_bits` fn to `Mem::bytes_from_bits`.
- deprecate fns/methods:
  - `Char`: `utf8_2bytes_len`, `utf8_3bytes_len`, `utf8_4bytes_len`.
- remove feature-gates:
  - `hash` for: `FxHasher`.
  - `io` for: `IoError`, `IoErrorKind`, `IoRead`, `IoWrite`, `IoBytes`, `IoChain`, `IoTake`.
  - `rand` for: `Xorshift128p`.
- auto-enable features:
  - `str`: when enabling `_str_u*`.
- make customizable: `XorShift[16|32|64]`.
- make const methods:
  - `Float`: `clamp`, `copysign`, `div_euclid`, `max`, `min`, `min_total`, `round_ties_odd`, `signum`.
  - `Mem`: `swap`.
- change attributes:
  - mark `Float` and `Sign` as `must_use`.
- derive Copy for `Lgc16`.
- update `str!` macro docs, tests and syntax: remove `:` suffix.
- make modules public:
  - `data::error`.
  - `num::geom::shape`.
  - `sys::env`.
  - `work::{future, process, sync}`.
- change `msvc` windows target for `gnu`.
- update scripts:
  - `utils/check.rs`:
    - add target components for the nightly toolchain.
    - add new fn `run_cargo_with_env`, sharing most of the logic with `run_cargo`.
    - enable `__dbg` feature & `-Ctarget-cpu=native`.
  - `build/features.rs`: support cfg flags auto-enabling other flags. Improve docs.
- improve the docs for vendored items.

### Fixed
- improve build script debug output.
- make `array_init` use absolute paths internally.
- enable nightly features depending on `alloc` and `std`.
- feature-gate:
  - `ExtFuture::block`.
  - namespaced re-exported unsafe methods with `unsafe··`.
- refactor `rustdoc-header.html` to be modular, more efficient and versatile.
- compile in docs.rs with `cpu-native` flag.

[unreleased]: https://github.com/andamira/devela/compare/v0.23.0-wip...HEAD
