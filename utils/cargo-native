#!/bin/sh
#
#
# A simple wrapper to enable native CPU optimizations for Cargo commands.
# Copy this script to a directory in your PATH (e.g., ~/.cargo/bin).
# Ensure the script is executable: chmod +x ~/.cargo/bin/cargo-native
#
# Usage:
#   $ cargo native <cargo-command> [args...]
# Examples:
#   $ cargo native build
#   $ cargo native test --release
#   $ cargo native run --example example_name
#

# Default flags for the "native" profile
#
# In sync with .cargo/config.toml
FLAGS="-C target-cpu=native"
DOCFLAGS="--html-in-header ./DOCS/rustdoc-header.html -C target-cpu=native"

# Shift the first argument ("native") and pass the rest to Cargo
shift

# Set RUSTFLAGS and execute the Cargo command
RUSTDOCFLAGS="$DOCFLAGS" RUSTFLAGS="$FLAGS" exec cargo "$@"
